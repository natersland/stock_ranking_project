import 'dart:math';

import 'package:stock_ranking_project/src/data/models/stock_ranking_model.dart';
import 'package:stock_ranking_project/src/data/repositories/stock_repository.dart';
import 'package:stock_ranking_project/src/domain/entities/stock/stock_ranking_entity.dart';

class StockRepositoryImplMock extends StockRepository {
  @override
  Future<List<StockRankingEntity>> getStockRanking({
    required int limit,
    String? market,
    required int page,
    String? sector,
  }) {
    final random = Random();
    List<GraphEntity> generateRandomGraphs() {
      int graphCount = random.nextInt(5) + 1;
      return List.generate(graphCount, (index) {
        double linePrice = random.nextDouble() * 1000 + 100;
        double stockPrice = linePrice + random.nextDouble() * 10;
        return GraphEntity(linePrice: linePrice, stockPrice: stockPrice);
      });
    }

    final List<StockRankingEntity> stocksMock = [
      StockRankingEntity(
        stockId: 1,
        name: 'Apple Inc.',
        symbol: 'AAPL',
        rank: 1,
        jittaScore: 9.5,
        updatedAt: '2024-09-15',
        latestPrice: 150.50,
        sector: const SectorEntity(id: '1', name: 'Technology'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'Consumer Electronics',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.05,
        currency: 'USD',
        jittaRankScore: 95.0,
        title: 'Top Tech Stock',
      ),
      StockRankingEntity(
        stockId: 2,
        name: 'Microsoft Corporation',
        symbol: 'MSFT',
        rank: 2,
        jittaScore: 9.2,
        updatedAt: '2024-09-15',
        latestPrice: 310.30,
        sector: const SectorEntity(id: '1', name: 'Technology'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'Software',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.03,
        currency: 'USD',
        jittaRankScore: 92.0,
        title: 'Software Leader',
      ),
      StockRankingEntity(
        stockId: 3,
        name: 'Amazon.com Inc.',
        symbol: 'AMZN',
        rank: 3,
        jittaScore: 8.8,
        updatedAt: '2024-09-15',
        latestPrice: 130.75,
        sector: const SectorEntity(id: '2', name: 'Retail'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'E-Commerce',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.06,
        currency: 'USD',
        jittaRankScore: 88.0,
        title: 'E-Commerce Giant',
      ),
      StockRankingEntity(
        stockId: 4,
        name: 'Alphabet Inc.',
        symbol: 'GOOGL',
        rank: 4,
        jittaScore: 9.1,
        updatedAt: '2024-09-15',
        latestPrice: 2800.55,
        sector: const SectorEntity(id: '1', name: 'Technology'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'Internet Services',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.04,
        currency: 'USD',
        jittaRankScore: 91.0,
        title: 'Search Engine Leader',
      ),
      StockRankingEntity(
        stockId: 5,
        name: 'Meta Platforms Inc.',
        symbol: 'META',
        rank: 5,
        jittaScore: 8.5,
        updatedAt: '2024-09-15',
        latestPrice: 265.40,
        sector: const SectorEntity(id: '1', name: 'Technology'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'Social Media',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.07,
        currency: 'USD',
        jittaRankScore: 85.0,
        title: 'Social Media Giant',
      ),
      StockRankingEntity(
        stockId: 6,
        name: 'Tesla Inc.',
        symbol: 'TSLA',
        rank: 6,
        jittaScore: 9.0,
        updatedAt: '2024-09-15',
        latestPrice: 750.00,
        sector: const SectorEntity(id: '3', name: 'Automotive'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'Electric Vehicles',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.05,
        currency: 'USD',
        jittaRankScore: 90.0,
        title: 'EV Pioneer',
      ),
      StockRankingEntity(
        stockId: 7,
        name: 'NVIDIA Corporation',
        symbol: 'NVDA',
        rank: 7,
        jittaScore: 9.3,
        updatedAt: '2024-09-15',
        latestPrice: 560.50,
        sector: const SectorEntity(id: '1', name: 'Technology'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'Semiconductors',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.03,
        currency: 'USD',
        jittaRankScore: 93.0,
        title: 'Chipmaker Leader',
      ),
      StockRankingEntity(
        stockId: 8,
        name: 'PayPal Holdings Inc.',
        symbol: 'PYPL',
        rank: 8,
        jittaScore: 7.8,
        updatedAt: '2024-09-15',
        latestPrice: 220.80,
        sector: const SectorEntity(id: '4', name: 'Retail'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'Digital Payments',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.10,
        currency: 'USD',
        jittaRankScore: 78.0,
        title: 'Payments Innovator',
      ),
      StockRankingEntity(
        stockId: 9,
        name: 'Adobe Inc.',
        symbol: 'ADBE',
        rank: 9,
        jittaScore: 8.4,
        updatedAt: '2024-09-15',
        latestPrice: 620.60,
        sector: const SectorEntity(id: '1', name: 'Technology'),
        market: 'NASDAQ',
        exchange: 'NASDAQ',
        industry: 'Software',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.06,
        currency: 'USD',
        jittaRankScore: 84.0,
        title: 'Creative Software Leader',
      ),
      StockRankingEntity(
        stockId: 10,
        name: 'Salesforce.com Inc.',
        symbol: 'CRM',
        rank: 10,
        jittaScore: 8.7,
        updatedAt: '2024-09-15',
        latestPrice: 210.00,
        sector: const SectorEntity(id: '1', name: 'Technology'),
        market: 'NYSE',
        exchange: 'NYSE',
        industry: 'Cloud Computing',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.05,
        currency: 'USD',
        jittaRankScore: 87.0,
        title: 'Cloud Leader',
      ),
      StockRankingEntity(
        stockId: 11,
        name: 'Walt Disney Co.',
        symbol: 'DIS',
        rank: 11,
        jittaScore: 7.5,
        updatedAt: '2024-09-15',
        latestPrice: 140.75,
        sector: const SectorEntity(id: '2', name: 'Consumer Discretionary'),
        market: 'NYSE',
        exchange: 'NYSE',
        industry: 'Media & Entertainment',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.12,
        currency: 'USD',
        jittaRankScore: 75.0,
        title: 'Entertainment Giant',
      ),
      StockRankingEntity(
        stockId: 12,
        name: 'Coca-Cola Company',
        symbol: 'KO',
        rank: 12,
        jittaScore: 6.8,
        updatedAt: '2024-09-15',
        latestPrice: 60.20,
        sector: const SectorEntity(id: '5', name: 'Retail'),
        market: 'NYSE',
        exchange: 'NYSE',
        industry: 'Beverages',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.10,
        currency: 'USD',
        jittaRankScore: 68.0,
        title: 'Beverage Giant',
      ),
      StockRankingEntity(
        stockId: 13,
        name: 'PepsiCo Inc.',
        symbol: 'PEP',
        rank: 13,
        jittaScore: 7.0,
        updatedAt: '2024-09-15',
        latestPrice: 175.50,
        sector: const SectorEntity(id: '5', name: 'Retail'),
        market: 'SET',
        exchange: 'NASDAQ',
        industry: 'Beverages',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.09,
        currency: 'USD',
        jittaRankScore: 70.0,
        title: 'Food and Beverage Leader',
      ),
      StockRankingEntity(
        stockId: 14,
        name: 'Pfizer Inc.',
        symbol: 'PFE',
        rank: 14,
        jittaScore: 8.0,
        updatedAt: '2024-09-15',
        latestPrice: 40.60,
        sector: const SectorEntity(id: '6', name: 'Automotive'),
        market: 'SET',
        exchange: 'NYSE',
        industry: 'Pharmaceuticals',
        graphs: generateRandomGraphs(),
        firstGraphqlPeriod: 'Q1 2024',
        status: 'Active',
        latestLossChance: 0.08,
        currency: 'USD',
        jittaRankScore: 80.0,
        title: 'Healthcare Leader',
      ),
    ];
    final filteredStocks = stocksMock.where((stock) {
      final matchesSector = sector == null || stock.sector.name == sector;
      final matchesMarket = market == null || stock.market == market;
      return matchesSector && matchesMarket;
    }).toList();

    return Future.value(filteredStocks);
  }

  @override
  Future<void> cacheStockRanking(List<StockRankingModel> stocks) {
    throw UnimplementedError();
  }

  @override
  Future<List<StockRankingModel?>> getCachedStockRanking() {
    throw UnimplementedError();
  }
}
